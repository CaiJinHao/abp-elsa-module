(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[487],{60709:function(z,j,e){"use strict";e.r(j),e.d(j,{default:function(){return U}});var D=e(58024),T=e(91894),H=e(20228),$=e(11382),J=e(57663),F=e(71577),K=e(47673),g=e(4107),v=e(11849),Q=e(71194),I=e(50146),X=e(9715),c=e(16579),x=e(2824),d=e(39428),m=e(3182),p=e(25377);function k(s){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function s(n){return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",request("/api/account/my-profile",_objectSpread({method:"GET"},n||{})));case 1:case"end":return t.stop()}},s)})),Z.apply(this,arguments)}function C(s,n){return w.apply(this,arguments)}function w(){return w=(0,m.Z)((0,d.Z)().mark(function s(n,i){return(0,d.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,p.WY)("/api/account/my-profile/change-password",(0,v.Z)({method:"POST",data:n,getResponse:!0},i||{})));case 1:case"end":return r.stop()}},s)})),w.apply(this,arguments)}function q(s,n){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function s(n,i){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",request("/api/account/my-profile",_objectSpread({method:"PUT",data:n},i||{})));case 1:case"end":return r.stop()}},s)})),y.apply(this,arguments)}var R=e(67265),G=e(67294),a=e(85893),L=function(){var s=(0,m.Z)((0,d.Z)().mark(function n(i){var t,r;return(0,d.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,C(i);case 2:if(r=u.sent,!(r!=null&&(t=r.response)!==null&&t!==void 0&&t.ok)){u.next=5;break}return u.abrupt("return",!0);case 5:return u.abrupt("return",!1);case 6:case"end":return u.stop()}},n)}));return function(i){return s.apply(this,arguments)}}(),O=function(){var n=(0,G.useState)(!1),i=(0,x.Z)(n,2),t=i[0],r=i[1],o=(0,p.YB)(),u=c.Z.useForm(),E=(0,x.Z)(u,1),b=E[0],S=(0,p.tT)("@@initialState"),_=S.initialState,V=S.setInitialState;return(0,a.jsx)(R.ZP,{children:(0,a.jsx)(T.Z,{title:o.formatMessage({id:"page.change-password.title"}),children:(0,a.jsx)($.Z,{spinning:t,children:(0,a.jsxs)(c.Z,{form:b,name:"basic",labelCol:{span:4},wrapperCol:{span:8},layout:"vertical",onFinish:function(){var P=(0,m.Z)((0,d.Z)().mark(function f(M){return(0,d.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r(!0),l.next=3,L(M);case 3:if(!l.sent){l.next=5;break}I.Z.info({title:o.formatMessage({id:"common.dict.info.tips"}),content:o.formatMessage({id:"page.change-password.submit.success"}),onOk:function(){var A=(0,m.Z)((0,d.Z)().mark(function N(){return(0,d.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,V(function(W){return(0,v.Z)((0,v.Z)({},W),{},{currentUser:void 0})});case 2:p.m8.replace("/auth/login");case 3:case"end":return h.stop()}},N)}));function B(){return A.apply(this,arguments)}return B}()});case 5:r(!1);case 6:case"end":return l.stop()}},f)}));return function(f){return P.apply(this,arguments)}}(),children:[(0,a.jsx)(c.Z.Item,{label:o.formatMessage({id:"page.change-password.field.currentPassword"}),name:"currentPassword",rules:[{required:!0},{min:6},{max:32}],children:(0,a.jsx)(g.Z.Password,{maxLength:32})}),(0,a.jsx)(c.Z.Item,{label:o.formatMessage({id:"page.change-password.field.newPassword"}),name:"newPassword",rules:[{required:!0},{min:6},{max:32}],children:(0,a.jsx)(g.Z.Password,{maxLength:32})}),(0,a.jsx)(c.Z.Item,{label:o.formatMessage({id:"page.change-password.field.confirmPassword"}),name:"confirmNewPassword",dependencies:["newPassword"],rules:[{required:!0},{min:6},{max:32},function(P){var f=P.getFieldValue;return{validator:function(Y,l){return!l||f("newPassword")===l?Promise.resolve():Promise.reject(new Error(o.formatMessage({id:"page.change-password.field.2passwordnotmatch"})))}}}],children:(0,a.jsx)(g.Z.Password,{maxLength:32})}),(0,a.jsx)(c.Z.Item,{label:"",children:(0,a.jsx)(F.Z,{type:"primary",htmlType:"submit",children:o.formatMessage({id:"page.change-password.submit"})})})]})})})})},U=O}}]);

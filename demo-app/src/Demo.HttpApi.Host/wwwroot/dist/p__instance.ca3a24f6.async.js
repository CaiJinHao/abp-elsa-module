(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[604],{16894:function(R,E,r){"use strict";var s=r(78775),c=r(4674);E.ZP=c.Z},11974:function(R,E,r){"use strict";r.r(E);var s=r(11849),c=r(34792),_=r(48086),d=r(71194),D=r(50146),p=r(39428),P=r(3182),v=r(49684),C=r(41180),M=r(90774),x=r(67265),O=r(16894),L=r(67294),T=r(25377),B=r(73727),Z=r(74754),k=r(85893),y=function(){var b=(0,L.useRef)(),i=(0,T.YB)(),W=[{dataIndex:"workflowDefinitionId",title:i.formatMessage({id:"page.instance.field.definition"}),hideInTable:!0,valueType:"select",request:function(){var I=(0,P.Z)((0,p.Z)().mark(function o(h){var n,t,a;return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.Jx)({filter:(n=h.keyWords)!==null&&n!==void 0?n:"",maxResultCount:100});case 2:return a=e.sent,e.abrupt("return",((t=a.items)!==null&&t!==void 0?t:[]).map(function(u){return{label:"".concat(u.displayName,"(").concat(u.name,")"),value:u.id}}));case 4:case"end":return e.stop()}},o)}));function g(o){return I.apply(this,arguments)}return g}(),fieldProps:{showSearch:!0}},{dataIndex:"name",title:i.formatMessage({id:"page.instance.field.name"}),copyable:!0,render:function(g,o){return(0,k.jsx)(B.rU,{to:{pathname:"/instances/".concat(o.id)},children:g})}},{dataIndex:"version",title:i.formatMessage({id:"page.instance.field.version"}),valueType:"digit",width:80},{dataIndex:"workflowStatus",title:i.formatMessage({id:"page.instance.field.workflowStatus"}),valueEnum:Z.J},{dataIndex:"creationTime",title:i.formatMessage({id:"common.dict.creationTime"}),valueType:"dateTime",search:!1},{dataIndex:"finishedTime",title:i.formatMessage({id:"page.instance.field.finishedTime"}),valueType:"dateTime",search:!1},{dataIndex:"lastExecutedTime",title:i.formatMessage({id:"page.instance.field.lastExecutedTime"}),valueType:"dateTime",search:!1},{dataIndex:"faultedTime",title:i.formatMessage({id:"page.instance.field.faultedTime"}),valueType:"dateTime",search:!1},{dataIndex:"correlationId",title:i.formatMessage({id:"page.instance.field.correlationId"}),width:150,ellipsis:!0,copyable:!0},{title:i.formatMessage({id:"common.dict.table-action"}),valueType:"option",width:170,align:"center",render:function(g,o,h,n){var t=[];return(o.workflowStatus==v.x8.Idle||o.workflowStatus==v.x8.Running||o.workflowStatus==v.x8.Suspended)&&t.push((0,k.jsx)("a",{onClick:function(){D.Z.confirm({title:i.formatMessage({id:"page.instance.cancel.confirm.title"}),content:i.formatMessage({id:"page.instance.cancel.confirm.content"}),onOk:function(){var l=(0,P.Z)((0,p.Z)().mark(function u(){var w,f;return(0,p.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,M.aT)(o.id);case 2:f=m.sent,f!=null&&(w=f.response)!==null&&w!==void 0&&w.ok&&(_.ZP.success(i.formatMessage({id:"page.instance.cancel.confirm.success"})),n==null||n.reload());case 4:case"end":return m.stop()}},u)}));function e(){return l.apply(this,arguments)}return e}()})},children:i.formatMessage({id:"page.instance.cancel"})},"cancel")),o.workflowStatus==v.x8.Faulted&&t.push((0,k.jsx)("a",{onClick:function(){D.Z.confirm({title:i.formatMessage({id:"page.instance.retry.confirm.title"}),content:i.formatMessage({id:"page.instance.retry.confirm.content"}),onOk:function(){var l=(0,P.Z)((0,p.Z)().mark(function u(){var w,f;return(0,p.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,M.C4)(o.id,{});case 2:f=m.sent,f!=null&&(w=f.response)!==null&&w!==void 0&&w.ok&&(_.ZP.success(i.formatMessage({id:"page.instance.retry.confirm.success"})),n==null||n.reload());case 4:case"end":return m.stop()}},u)}));function e(){return l.apply(this,arguments)}return e}()})},children:i.formatMessage({id:"page.instance.retry"})},"retry")),t.push((0,k.jsx)("a",{onClick:function(){D.Z.confirm({title:i.formatMessage({id:"common.dict.delete.confirm"}),content:i.formatMessage({id:"page.instance.delete.confirm.content"}),onOk:function(){var l=(0,P.Z)((0,p.Z)().mark(function u(){var w,f;return(0,p.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,(0,M.BK)(o.id);case 2:f=m.sent,f!=null&&(w=f.response)!==null&&w!==void 0&&w.ok&&(_.ZP.success(i.formatMessage({id:"common.dict.delete.success"})),n==null||n.reload());case 4:case"end":return m.stop()}},u)}));function e(){return l.apply(this,arguments)}return e}()})},children:i.formatMessage({id:"common.dict.delete"})},"delete")),t}}];return(0,k.jsx)(x.ZP,{children:(0,k.jsx)(O.ZP,{columns:W,actionRef:b,search:{labelWidth:120},rowKey:"id",request:function(){var I=(0,P.Z)((0,p.Z)().mark(function g(o){var h,n,t,a;return(0,p.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h=o.current,n=o.pageSize,delete o.current,delete o.pageSize,t=(h-1)*n,e.next=6,(0,M.qd)((0,s.Z)((0,s.Z)({},o),{},{skipCount:t,maxResultCount:n}));case 6:if(a=e.sent,!a){e.next=11;break}return e.abrupt("return",{success:!0,data:a.items,total:a.totalCount});case 11:return e.abrupt("return",{success:!1});case 12:case"end":return e.stop()}},g)}));return function(g){return I.apply(this,arguments)}}()})})};E.default=y},74754:function(R,E,r){"use strict";r.d(E,{J:function(){return D}});var s=r(32059),c=r(49684),_=r(25377),d,D=(d={},(0,s.Z)(d,c.x8.Idle,{text:(0,_.wv)({id:"page.instance.status.idle"}),status:"default"}),(0,s.Z)(d,c.x8.Running,{text:(0,_.wv)({id:"page.instance.status.running"}),status:"processing"}),(0,s.Z)(d,c.x8.Finished,{text:(0,_.wv)({id:"page.instance.status.finished"}),status:"success"}),(0,s.Z)(d,c.x8.Suspended,{text:(0,_.wv)({id:"page.instance.status.suspended"}),status:"warning"}),(0,s.Z)(d,c.x8.Faulted,{text:(0,_.wv)({id:"page.instance.status.faulted"}),status:"error"}),(0,s.Z)(d,c.x8.Cancelled,{text:(0,_.wv)({id:"page.instance.status.cancelled"}),status:"default"}),d)},90774:function(R,E,r){"use strict";r.d(E,{BK:function(){return P},mV:function(){return C},jP:function(){return x},qd:function(){return L},Cb:function(){return B},$5:function(){return k},aT:function(){return K},C4:function(){return o}});var s=r(39428),c=r(11849),_=r(3182),d=r(25377);function D(n,t){return p.apply(this,arguments)}function p(){return p=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/workflow-instances",_objectSpread({method:"DELETE",data:t,getResponse:!0},a||{})));case 1:case"end":return e.stop()}},n)})),p.apply(this,arguments)}function P(n,t){return v.apply(this,arguments)}function v(){return v=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t),(0,c.Z)({method:"DELETE",getResponse:!0},a||{})));case 1:case"end":return e.stop()}},n)})),v.apply(this,arguments)}function C(n,t){return M.apply(this,arguments)}function M(){return M=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t),(0,c.Z)({method:"GET"},a||{})));case 1:case"end":return e.stop()}},n)})),M.apply(this,arguments)}function x(n,t){return O.apply(this,arguments)}function O(){return O=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t,"/execution-logs"),(0,c.Z)({method:"GET"},a||{})));case 1:case"end":return e.stop()}},n)})),O.apply(this,arguments)}function L(n,t){return T.apply(this,arguments)}function T(){return T=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances",(0,c.Z)({method:"GET",params:t},a||{})));case 1:case"end":return e.stop()}},n)})),T.apply(this,arguments)}function B(n,t){return Z.apply(this,arguments)}function Z(){return Z=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t,"/execution-logs/summary"),(0,c.Z)({method:"GET"},a||{})));case 1:case"end":return e.stop()}},n)})),Z.apply(this,arguments)}function k(n,t){return y.apply(this,arguments)}function y(){return y=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/statistics/count-date",(0,c.Z)({method:"GET",params:t},a||{})));case 1:case"end":return e.stop()}},n)})),y.apply(this,arguments)}function K(n,t){return b.apply(this,arguments)}function b(){return b=(0,_.Z)((0,s.Z)().mark(function n(t,a){return(0,s.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t,"/cancel"),(0,c.Z)({method:"POST",getResponse:!0},a||{})));case 1:case"end":return e.stop()}},n)})),b.apply(this,arguments)}function i(n,t,a){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a,l){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/workflow-instances/".concat(t,"/dispatch"),_objectSpread({method:"POST",data:a,getResponse:!0},l||{})));case 1:case"end":return u.stop()}},n)})),W.apply(this,arguments)}function I(n,t,a){return g.apply(this,arguments)}function g(){return g=_asyncToGenerator(_regeneratorRuntime().mark(function n(t,a,l){return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",request("/api/workflow-instances/".concat(t,"/execute"),_objectSpread({method:"POST",data:a,getResponse:!0},l||{})));case 1:case"end":return u.stop()}},n)})),g.apply(this,arguments)}function o(n,t,a){return h.apply(this,arguments)}function h(){return h=(0,_.Z)((0,s.Z)().mark(function n(t,a,l){return(0,s.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,d.WY)("/api/workflow-instances/".concat(t,"/retry"),(0,c.Z)({method:"POST",data:a,getResponse:!0},l||{})));case 1:case"end":return u.stop()}},n)})),h.apply(this,arguments)}}}]);
